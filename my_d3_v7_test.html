<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <title>test</title>
</head>

<body>
    <div id="xyz_food_stock_price">
        <!-- <svg id="xyz_food_stock_price" style="width: 600; height: 500"></svg>
        <script>
            const svg = d3.select("svg#xyz_food_stock_price"),
                margin = 200,
                width = svg.attr("width") - margin,
                height = svg.attr("height") - margin;

            const title = svg.append("text")
                .attr("transform", "translate(100,0)")
                .attr("x", 50)
                .attr("y", 50)
                .attr("font-size", "24px")
                .text("XYZ Foods Stock Price");

            const xScale = d3.scaleBand().range([0, width]).padding(0.4),
                yScale = d3.scaleLinear().range([height, 0]);

            const g = svg.append("g")
                .attr("transform", "translate(" + 100 + "," + 100 + ")");

            d3.csv("XYZ.csv")
                .then((data) => {
                    // array of objects
                    console.log(data.length);
                    // do something with the data

                })
                .catch((error) => {
                    console.error("Error loading the data");
                });
        </script> -->
    </div>
    <div id="hover_events">
        <!-- <script>
            const data = [1, 2, 3];
            const circles = d3
                .select("body")
                .append("svg")
                .attr("width", "100%")
                .attr("height", "150")
                .selectAll("circle")
                .data(data)
                .join((enter) =>
                    enter
                    .append("circle")
                    .attr("r", 30)
                    .attr("cy", 50)
                    .attr("cx", (d, i) => 200 + i * 100)
                    .on("mouseover", function(event, d) {
                        const circle = d3.select(this); // can't use arrow scoping
                        circle
                            .style("stroke", "orange")
                            .style("stroke-width", "5");
                    })
                    .on("mouseout", function(event, d) {
                        const circle = d3.select(this); // can't use arrow scoping
                        circle
                            .style("stroke", "none");
                    })
                );
        </script> -->
    </div>
    <div id="transition">
        <!-- <script>
            const data = [1, 2, 3];
            const circles = d3
                .select("body")
                .append("svg")
                .attr("width", "100%")
                .attr("height", "500")
                .selectAll("circle")
                .data(data)
                .join(
                    (enter) => enter.append("circle").attr("r", 10).attr("cx", 100).attr("cy", 100) // useful default values for animation
                );

            circles
                .transition()
                .duration(1000) // duration of the animation
                .delay(200) // delay animation start
                .attr("cx", (d, i) => d * 50)
                .attr("cy", (d, i) => 40 + i * 100)
                .transition() // start another transition after the first one ended
                .attr("r", 20);
        </script> -->
    </div>
    <div id="key_argument">
        <!-- <script>
            const cscale = d3.scaleOrdinal(d3.schemeCategory10).domain(["a", "b", "c", "d"]);
            const xscale = d3.scaleBand().domain(["a", "b", "c", "d"]).range([10, 200]);

            function update(data) {
                const s = d3.select("body").append("svg");
                // key argument return a unique key/id per data-item (string)
                const circles = s
                    .selectAll("circle")
                    .data(data, (d) => d)
                    .join((enter) => enter.append("circle").attr("r", 10).attr("cx", xscale).style("fill", cscale));

                // a will be bound to the first DOM element
                circles.transition().attr("cy", (d, i) => 10 + i * 20);
            }

            let data = ["a", "b", "c"];
            update(data);

            // later on... 2secs
            setTimeout(() => {
                data = ["c", "a", "d"];
                // the items will move to their new position,
                // and the DOM element for 'b' will be removed
                // and another one for 'd' created
                update(data);
            }, 2000);
        </script> -->
    </div>
    <div id="v4_tutorial_final">
        <!-- <script>
            var svg = d3.select("body")
                .append("svg")
                .attr("width", "600")
                .attr("height", "500"),
                margin = 200,
                width = svg.attr("width") - margin,
                height = svg.attr("height") - margin

            svg.append("text")
                .attr("transform", "translate(100,0)")
                .attr("x", 50)
                .attr("y", 50)
                .attr("font-size", "24px")
                .text("XYZ Foods Stock Price")

            var xScale = d3.scaleBand().range([0, width]).padding(0.4),
                yScale = d3.scaleLinear().range([height, 0]);

            var g = svg.append("g")
                .attr("transform", "translate(" + 100 + "," + 100 + ")");

            d3.csv("https://raw.githubusercontent.com/czsth/czsth-learn-d3/main/XYZ.csv").then((data) => {
                xScale.domain(data.map(function(d) {
                    return d.year;
                }));
                yScale.domain([0, d3.max(data, function(d) {
                    return d.value;
                })]);

                g.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(xScale))
                    .append("text")
                    .attr("y", height - 250)
                    .attr("x", width - 100)
                    .attr("text-anchor", "end")
                    .attr("stroke", "black")
                    .text("Year");

                g.append("g")
                    .call(d3.axisLeft(yScale).tickFormat(function(d) {
                            return "$" + d;
                        })
                        .ticks(10))
                    .append("text")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 6)
                    .attr("dy", "-5.1em")
                    .attr("text-anchor", "end")
                    .attr("stroke", "black")
                    .text("Stock Price");

                g.selectAll(".bar")
                    .data(data)
                    .enter().append("rect")
                    .attr("class", "bar")
                    .attr("x", function(d) {
                        return xScale(d.year);
                    })
                    .attr("y", function(d) {
                        return yScale(d.value);
                    })
                    .attr("width", xScale.bandwidth())
                    .attr("height", function(d) {
                        return height - yScale(d.value);
                    });
            });
        </script> -->
    </div>

</body>

</html>